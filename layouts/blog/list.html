{{ define "main" }}

{{$indexScratch := newScratch}}
{{$indexScratch.Set "articleList" .Pages}}

{{if not .IsHome }}

    {{ range .Sections.Reverse}}
    {{ $indexScratch.Add "articleList" .Pages}}
    
    {{ if ge (len .Section) 0}}
        {{ range .Sections.Reverse}}
        {{ $indexScratch.Add "articleList" .Pages}}
        
        {{ if ge (len .Section) 0}}
            {{ range .Sections.Reverse}}
            {{ $indexScratch.Add "articleList" .Pages}}
            
            {{ if ge (len .Section) 0}}
                {{ range .Sections.Reverse}}
                    {{ $indexScratch.Add "articleList" .Pages}}
                {{ end }}
            {{ end }}
        
            {{ end }}
        {{ end }}
        
        {{ end }}
    {{ end }}
    
    {{ end }}
{{ end }}

{{ $paginator := .Paginate (where ($indexScratch.Get "articleList") "Type" "!=" "page").ByDate.Reverse }}

{{ range $paginator.Pages}}
    <div class="mcol c6">{{ .Render "li" }}</div>
{{ end }}

{{ $indexScratch.Delete "articleList"}}

<h1>All</h1>
<div class="card">
    <h*><span class="badge badge-secondary">プログラミング</span></h*>
    <h*><span class="badge badge-secondary">Bootstrap</span></h*>
    <p class="card-title">
        Bootstrapのグリッドレイアウトって何？
    </p>
    <p class="card-subtitle">
        サブタイトル・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・
    </p>
    <p>2019年11月19日</p>
</div>

<div class="card">
    <h*><span class="badge badge-secondary">プログラミング</span></h*>
    <h*><span class="badge badge-secondary">Bootstrap</span></h*>
    <p class="card-title">
        Bootstrapのマージンはどのように実現できるか？
    </p>
    <p class="card-subtitle">
        サブタイトル・・・・・・\・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・
    </p>
    <p>2019年11月19日</p>
</div>

<div class="card">
    <h*><span class="badge badge-secondary">プログラミング</span></h*>
    <h*><span class="badge badge-secondary">CSS</span></h*>
    <p class="card-title">
        CSSのスタイルって何？
    </p>
    <p class="card-subtitle">
        サブタイトル・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・
    </p>
    <p>2019年11月19日</p>
</div>
{{ end }}